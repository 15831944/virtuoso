Open Virtuoso Build Readme
==========================

This document explains steps to take after obtaining an Open Virtuoso source
snapshot or cvs checkout.

These sections explain how to compile, test and install and what components are
produced by the make process and how one can interact with them.

Software Requirements
=====================

  * Linux or Unix platform with normal C-compiler tools
  * libtool 1.5
  * autoconf 2.59
  * automake 1.9
  * OpenSSL 0.9.7
  * flex 2.5.4
  * bison 1.35
  * gperf 2.7.2
  * gawk 3.1.1

and any GNU packages required by these. The autogen.sh and configure
scripts check for the presence and right version of some of the required
components.

The build produces a demo database and Virtuoso application packages that
are quite large. At least 600 MB of free space should be available in the
build file system.

When running `make install', the target file system should have about 370
MB free. By default, the install target directories are under /usr/local/,
but you can specify

    ./configure --prefix=/path/to/dir

instead.

The minimum working configuration consists of the server executable and
config files plus database, no more than a few MB for the server
executable, depending on platform and options.


Make FAQ
========

Virtuoso Server

When in the root directory of the checkout:

    ./autogen.sh 
    ./configure 
    make

will produce the default binaries, VAD packages and demo database. This
takes some time, principally due to building and filling the demo database,
rendering the XML documentation into several target formats and composing
various Virtuoso application packages. This is about 30 minutes on a 2GHz
machine.

The default configure does not enable most of the runtime-hosting and
extension features. See the links on the building page for instructions on
how to enable these and what additional software is required.

Getting Started
===============

To test the demo database where it is built, you can set the shell PATH to
include binsrc/tests:binsrc/virtuoso in the build tree.

Then cd to binsrc/samples/demo.

    virtuoso-t -c demo.ini -f &

to start the server in the background. It will not detach from the shell, so
you see the startup messages.

To connect with the command line SQL tool,

    isql 1112 dba dba

gives a SQL> prompt.

Type

    SQL> use Demo;

to switch to the demo database, containing the Microsoft Northwind sample
tables. The help command of isql gives further instructions.

To use a web admin interface, point the browser to: 
http://localhost:8890/conductor

To read the documents online: 
http://localhost:8890/doc/html

To experiment with online tutorials: 
http://localhost:8890/tutorial

Installation
============

After running configure && make,

    make install

at the root of the build tree copies the files to the locations specified by
the --prefix option to configure. The default of --prefix is /usr/local/.

The below paths are all appended to --prefix, i.e. /usr/local/ by default.

  * share/virtuoso/doc/html
  * share/virtuoso/doc/pdf
  * share/virtuoso/vad - VAD packages BPEL, Conductor, tutorials, documentation

  * var/lib/virtuoso/db - Empty database
  * var/lib/virtuoso/demo - Demo database

  * bin/ - The virtuoso-t, isql, isqlw, virt_mail, virtuoso-sample-t, inifile
    executables
  * lib/ - libvirtuoso-t.a libvirtuoso-t.la virtodbc32.a virtodbc32.la
    virtodbc32_r.a virtodbc32_r.la virtodbc_r.so wikiv.so plus any plugins that
    may be enabled.
  * lib/virtuoso - hosting_sample.a hosting_sample.la hosting_sample.so
    plugin_sample.a plugin_sample.so

Test Suite
==========

    make check

at the root of the build tree will run the automated test suite. This takes
about an hour on a 2GHz machine and requires approximately 1 GB of free
space.

Starting With an Empty Database
===============================

After installation, there is a sample virtuoso.ini file in
var/lib/virtuoso/db. The virtuoso-t executable can be started in any empty
directory containing a virtuoso.ini file. The empty database and other
files will be created at startup according to the paths and filenames in
the ini file. All names are relative to the starting directory of the
server; no special database-creation utility is needed. The default admin
account is called "dba" and its password is also "dba".

VAD Packages
============

The different VAD packages can be installed via ISQL using the following
command (if the installation packages reside in the filesystem):

    SQL> vad_install ('<filesystem-path>/<package-name'.vad', 0);

Alternatively, you can copy VAD packages to Virtuoso's DAV repository and
then execute the following command (also from ISQL):

SQL> vad_install ('<webdav-path>/<package-name'.vad', 1);

At the isql command line. Note that the DirsAllowed parameter of the
Parameters section of the ini-file must allow access to the directory where
the package file is.

